import { GoogleGenerativeAI } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        { text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format." },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "```json\n{\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"The D Las Vegas\",\n      \"hotelAddress\": \"301 Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$50 - $100 per night\",\n      \"hotelImageUrl\": \"https://images.trvl-media.com/hotels/1000000/900000/896000/895700/895748/895748_160.jpg\",\n      \"geoCoordinates\": \"36.1699° N, 115.1424° W\",\n      \"rating\": 4.0,\n      \"description\": \"A budget-friendly hotel located in the heart of Fremont Street Experience, known for its lively atmosphere and affordable amenities.\"\n    },\n    {\n      \"hotelName\": \"The Golden Nugget\",\n      \"hotelAddress\": \"129 E Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$80 - $150 per night\",\n      \"hotelImageUrl\": \"https://images.trvl-media.com/hotels/1000000/900000/898000/897600/897634/897634_160.jpg\",\n      \"geoCoordinates\": \"36.1694° N, 115.1402° W\",\n      \"rating\": 4.5,\n      \"description\": \"A historic hotel with a vibrant casino and a famous shark tank, offering a unique experience in the heart of downtown.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80 per night\",\n      \"hotelImageUrl\": \"https://images.trvl-media.com/hotels/1000000/900000/892000/891600/891680/891680_160.jpg\",\n      \"geoCoordinates\": \"36.1073° N, 115.1732° W\",\n      \"rating\": 3.5,\n      \"description\": \"A family-friendly hotel with a circus theme, offering affordable entertainment and a carnival-like atmosphere.\"\n    },\n    {\n      \"hotelName\": \"The Strat Hotel, Casino & SkyPod\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"$60 - $120 per night\",\n      \"hotelImageUrl\": \"https://images.trvl-media.com/hotels/1000000/900000/894000/893700/893737/893737_160.jpg\",\n      \"geoCoordinates\": \"36.1146° N, 115.1680° W\",\n      \"rating\": 4.0,\n      \"description\": \"A towering hotel with an observation deck offering panoramic views of the city, perfect for budget-conscious travelers seeking a unique experience.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian-friendly street with a giant video canopy, offering free live entertainment, street performers, and a bustling nightlife.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/hero_image_large/public/hero/hero_freemont_street_experience.jpg\",\n          \"geoCoordinates\": \"36.1696° N, 115.1422° W\",\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"2-3 hours\",\n          \"bestTimeToVisit\": \"Evening for the light show and lively atmosphere\"\n        },\n        {\n          \"placeName\": \"The Neon Museum\",\n          \"placeDetails\": \"A museum showcasing iconic neon signs from Las Vegas's history, offering a glimpse into the city's vibrant past.\",\n          \"placeImageUrl\": \"https://www.neonmuseum.org/sites/default/files/styles/gallery_large/public/gallery/neon_museum_sign_gallery_8.jpg\",\n          \"geoCoordinates\": \"36.1772° N, 115.1444° W\",\n          \"ticketPricing\": \"$20 - $30\",\n          \"timeToTravel\": \"1-2 hours\",\n          \"bestTimeToVisit\": \"Daytime for a well-lit tour\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Hoover Dam\",\n          \"placeDetails\": \"A historic dam and engineering marvel, offering guided tours and breathtaking views of the Colorado River.\",\n          \"placeImageUrl\": \"https://www.nps.gov/hdam/planyourvisit/images/hooverdam_full.jpg\",\n          \"geoCoordinates\": \"36.0042° N, 114.9744° W\",\n          \"ticketPricing\": \"$30 - $40 for a tour\",\n          \"timeToTravel\": \"4-5 hours (including travel time)\",\n          \"bestTimeToVisit\": \"Morning or late afternoon to avoid peak crowds\"\n        },\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"A scenic desert landscape with hiking trails, rock formations, and stunning views.\",\n          \"placeImageUrl\": \"https://www.nps.gov/redr/learn/nature/images/redrockcanyon_pano.jpg\",\n          \"geoCoordinates\": \"36.1248° N, 115.2283° W\",\n          \"ticketPricing\": \"$15 per vehicle\",\n          \"timeToTravel\": \"2-3 hours\",\n          \"bestTimeToVisit\": \"Morning or evening for cooler temperatures\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A free attraction showcasing stunning floral displays and botanical art, changing seasonally.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/images/pages/conservatory-botanical-garden/conservatory-botanical-garden-hero.jpg\",\n          \"geoCoordinates\": \"36.1185° N, 115.1736° W\",\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"1-2 hours\",\n          \"bestTimeToVisit\": \"Anytime, as it's indoors\"\n        },\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"An outdoor shopping, dining, and entertainment complex with a giant observation wheel and a lively atmosphere.\",\n          \"placeImageUrl\": \"https://www.linq.com/content/dam/linq/images/pages/home/home-hero.jpg\",\n          \"geoCoordinates\": \"36.1203° N, 115.1758° W\",\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"2-3 hours\",\n          \"bestTimeToVisit\": \"Evening for the illuminated atmosphere\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Explanation of the JSON Structure:**\n\n- **hotelOptions:** An array containing information about hotels suitable for a budget-conscious couple. Each hotel object includes:\n    - **hotelName:** The name of the hotel.\n    - **hotelAddress:** The physical address of the hotel.\n    - **price:** A general price range per night.\n    - **hotelImageUrl:** A URL for a visual representation of the hotel.\n    - **geoCoordinates:** Latitude and longitude coordinates for location on a map.\n    - **rating:** A star rating based on reviews.\n    - **description:** A brief description of the hotel and its amenities.\n- **itinerary:** A plan for three days in Las Vegas.\n    - **day1, day2, day3:**  Each day has a plan, which is an array containing information about places to visit. Each place object includes:\n        - **placeName:** The name of the place.\n        - **placeDetails:** A description of the place and what it offers.\n        - **placeImageUrl:** A URL for a visual representation of the place.\n        - **geoCoordinates:** Latitude and longitude coordinates for location on a map.\n        - **ticketPricing:** Information on entry fees or tickets.\n        - **timeToTravel:** An estimate of how much time to spend at the place.\n        - **bestTimeToVisit:** Recommendations for the best time of day to visit based on experience or lighting.\n\n**Please Note:**\n\n- Prices and availability are subject to change. It's always recommended to check with the hotels and attractions for the most up-to-date information.\n- This itinerary focuses on free or affordable activities. You can adjust it based on your interests and budget.\n- Be sure to factor in transportation costs when planning your budget. Las Vegas has good public transportation, but taxis and ride-sharing services are also available. \n" },
      ],
    },
  ],
});